# read in Excel file, tab CDS_spreads_history into R dataframe
cds_basket_data=read_excel('Documents/CQF/basket_default_swap/data/default_basket_data.xlsx',
'CDS_spreads_history',
range = 'E21:N1853')
# read in Excel file, tab CDS_spreads_history into R dataframe
cds_basket_data=read_excel('data/default_basket_data.xlsx',
'CDS_spreads_history',
range = 'E21:N1853')
library(readxl) # Excel reader package
# Load cds spreads from Excel sheet
library(readxl) # Excel reader package
library(dplyr) # Dataframe manipulation package
library(zoo) # Dataframe manipulation package
# read in Excel file, tab CDS_spreads_history into R dataframe
cds_basket_data=read_excel('data/default_basket_data.xlsx',
'CDS_spreads_history',
range = 'E21:N1853')
# read in Excel file, tab CDS_spreads_history into R dataframe
cds_basket_data=read_excel('./data/default_basket_data.xlsx',
'CDS_spreads_history',
range = 'E21:N1853')
# read in Excel file, tab CDS_spreads_history into R dataframe
cds_basket_data=read_excel('../data/default_basket_data.xlsx',
'CDS_spreads_history',
range = 'E21:N1853')
# read in Excel file, tab CDS_spreads_history into R dataframe
cds_basket_data=read_excel('C:CQF/Project/data/default_basket_data.xlsx',
'CDS_spreads_history',
range = 'E21:N1853')
# read in Excel file, tab CDS_spreads_history into R dataframe
cds_basket_data=read_excel('C:/CQF/Project/data/default_basket_data.xlsx',
'CDS_spreads_history',
range = 'E21:N1853')
View(cds_basket_data)
View(cds_basket_data)
cds_basket_data %>% mutate(change = ('Level Credit Suisse' - lead('Level Credit Suisse')) / lead('Level Credit Suisse'))
rlang::last_error()
View(cds_basket_data)
cds_basket_data %>% mutate(change = ('Level Banco Santander' - lead('Level Banco Santander')) / lead('Level Banco Santander'))
View(cds_basket_data)
View(cds_basket_data)
# Load cds spreads from Excel sheet
library(readxl) # Excel reader package
library(dplyr) # Dataframe manipulation package
library(zoo) # Dataframe manipulation package
# read in Excel file, tab CDS_spreads_history into R dataframe
cds_basket_data=read_excel('C:/CQF/Project/data/default_basket_data.xlsx',
'CDS_spreads_history',
range = 'E21:N1853')
# show cds dataframe
cds_basket_data
# plot with gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='steelblue', xlab='Time Stamp', ylab='Price')
# Load cds spreads from Excel sheet
library(readxl) # Excel reader package
library(dplyr) # Dataframe manipulation package
library(zoo) # Dataframe manipulation package
# read in Excel file, tab CDS_spreads_history into R dataframe
cds_basket_data=read_excel('C:/CQF/Project/data/default_basket_data.xlsx',
'CDS_spreads_history',
range = 'E21:N1853')
# show cds dataframe
cds_basket_data
# plot with gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='steelblue', xlab='Time Stamp', ylab='Price')
#interpolate missing values in 'Banco Santander' column
cds_basket_data <- cds_basket_data %>%
mutate(`Level Banco Santander` = na.approx(`Level Banco Santander`))
# plot without gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='chocolate4', xlab='Time Stamp', ylab='Price')
# compute returns
#cds_basket_data %>%
#  mutate(across(everything(), .funs = funs((~(lead(.) - .) / .))))
cds_basket_data %>% mutate(change = ('Level Banco Santander' - lead('Level Banco Santander')) / lead('Level Banco Santander'))
# Load cds spreads from Excel sheet
library(readxl) # Excel reader package
library(dplyr) # Dataframe manipulation package
library(zoo) # Dataframe manipulation package
# read in Excel file, tab CDS_spreads_history into R dataframe
cds_basket_data=read_excel('C:/CQF/Project/data/default_basket_data.xlsx',
'CDS_spreads_history',
range = 'E21:N1853')
# show cds dataframe
cds_basket_data
# plot with gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='steelblue', xlab='Time Stamp', ylab='Price')
#interpolate missing values in 'Banco Santander' column
cds_basket_data <- cds_basket_data %>%
mutate(`Level Banco Santander` = na.approx(`Level Banco Santander`))
# plot without gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='chocolate4', xlab='Time Stamp', ylab='Price')
# compute returns
#cds_basket_data %>%
#  mutate(across(everything(), .funs = funs((~(lead(.) - .) / .))))
cds_basket_data %>% mutate(change = ('Level Banco Santander' - lead('Level Banco Santander')) / lead('Level Banco Santander'))
# show cds dataframe
cds_basket_data
# Load cds spreads from Excel sheet
library(readxl) # Excel reader package
library(dplyr) # Dataframe manipulation package
library(zoo) # Dataframe manipulation package
# read in Excel file, tab CDS_spreads_history into R dataframe
cds_basket_data=read_excel('C:/CQF/Project/data/default_basket_data.xlsx',
'CDS_spreads_history',
range = 'E21:N1853')
# show cds dataframe
cds_basket_data
# plot with gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='steelblue', xlab='Time Stamp', ylab='Price')
#interpolate missing values in 'Banco Santander' column
cds_basket_data <- cds_basket_data %>%
mutate(`Level Banco Santander` = na.approx(`Level Banco Santander`))
# plot without gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='chocolate4', xlab='Time Stamp', ylab='Price')
# compute returns
#cds_basket_data %>%
#  mutate(across(everything(), .funs = funs((~(lead(.) - .) / .))))
cds_basket_data %>% mutate(change = (cds_basket_data$`Level Banco Santander` - lead(cds_basket_data$`Level Banco Santander`)) / lead(cds_basket_data$`Level Banco Santander`))
# cds_basket_data %>%
# mutate(across('Level Credit Suisse'), .funs = (DR = list(~(lead(.) - .) / .)))
pseudo.uniform = function(X){
Fhat <- kcde(X)
predict(Fhat, x=X)
}
num_missing_values <-sum(is.na(cds_basket_data$'Level Credit Suisse'))
View(cds_basket_data)
# Load cds spreads from Excel sheet
library(readxl) # Excel reader package
library(dplyr) # Dataframe manipulation package
library(zoo) # Dataframe manipulation package
# read in Excel file, tab CDS_spreads_history into R dataframe
cds_basket_data=read_excel('C:/CQF/Project/data/default_basket_data.xlsx',
'CDS_spreads_history',
range = 'E21:N1853')
# show cds dataframe
cds_basket_data
# plot with gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='steelblue', xlab='Time Stamp', ylab='Price')
#interpolate missing values in 'Banco Santander' column
cds_basket_data <- cds_basket_data %>%
mutate(`Level Banco Santander` = na.approx(`Level Banco Santander`))
# plot without gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='chocolate4', xlab='Time Stamp', ylab='Price')
# compute returns
cds_basket_data %>%
mutate(across(everything(), .funs = funs((~(lead(.) - .) / .))))
#cds_basket_data %>% mutate(change = (cds_basket_data$`Level Banco Santander` - lead(cds_basket_data$`Level Banco Santander`)) / lead(cds_basket_data$`Level Banco Santander`))
# cds_basket_data %>%
# mutate(across('Level Credit Suisse'), .funs = (DR = list(~(lead(.) - .) / .)))
pseudo.uniform = function(X){
Fhat <- kcde(X)
predict(Fhat, x=X)
}
num_missing_values <-sum(is.na(cds_basket_data$'Level Credit Suisse'))
# Load cds spreads from Excel sheet
library(readxl) # Excel reader package
library(dplyr) # Dataframe manipulation package
library(zoo) # Dataframe manipulation package
# read in Excel file, tab CDS_spreads_history into R dataframe
cds_basket_data=read_excel('C:/CQF/Project/data/default_basket_data.xlsx',
'CDS_spreads_history',
range = 'E21:N1853')
# show cds dataframe
cds_basket_data
# plot with gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='steelblue', xlab='Time Stamp', ylab='Price')
#interpolate missing values in 'Banco Santander' column
cds_basket_data <- cds_basket_data %>%
mutate(`Level Banco Santander` = na.approx(`Level Banco Santander`))
# plot without gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='chocolate4', xlab='Time Stamp', ylab='Price')
# compute returns
cds_basket_data %>%
mutate(across(starts_with, .funs = funs((~(lead(.) - .) / .))))
# Load cds spreads from Excel sheet
library(readxl) # Excel reader package
library(dplyr) # Dataframe manipulation package
library(zoo) # Dataframe manipulation package
# read in Excel file, tab CDS_spreads_history into R dataframe
cds_basket_data=read_excel('C:/CQF/Project/data/default_basket_data.xlsx',
'CDS_spreads_history',
range = 'E21:N1853')
# show cds dataframe
cds_basket_data
# plot with gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='steelblue', xlab='Time Stamp', ylab='Price')
#interpolate missing values in 'Banco Santander' column
cds_basket_data <- cds_basket_data %>%
mutate(`Level Banco Santander` = na.approx(`Level Banco Santander`))
# plot without gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='chocolate4', xlab='Time Stamp', ylab='Price')
# compute returns
cds_basket_data %>%
mutate(across(starts_with('Level'), .funs = funs((~(lead(.) - .) / .))))
#cds_basket_data %>% mutate(change = (cds_basket_data$`Level Banco Santander` - lead(cds_basket_data$`Level Banco Santander`)) / lead(cds_basket_data$`Level Banco Santander`))
# cds_basket_data %>%
# mutate(across('Level Credit Suisse'), .funs = (DR = list(~(lead(.) - .) / .)))
pseudo.uniform = function(X){
Fhat <- kcde(X)
predict(Fhat, x=X)
}
num_missing_values <-sum(is.na(cds_basket_data$'Level Credit Suisse'))
# Load cds spreads from Excel sheet
library(readxl) # Excel reader package
library(dplyr) # Dataframe manipulation package
library(zoo) # Dataframe manipulation package
# read in Excel file, tab CDS_spreads_history into R dataframe
cds_basket_data=read_excel('C:/CQF/Project/data/default_basket_data.xlsx',
'CDS_spreads_history',
range = 'E21:N1853')
# show cds dataframe
cds_basket_data
# plot with gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='steelblue', xlab='Time Stamp', ylab='Price')
#interpolate missing values in 'Banco Santander' column
cds_basket_data <- cds_basket_data %>%
mutate(`Level Banco Santander` = na.approx(`Level Banco Santander`))
# plot without gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='chocolate4', xlab='Time Stamp', ylab='Price')
# compute returns
cds_basket_data <-
mutate(cds_basket_data, across(starts_with('Level'), .funs = funs((~(lead(.) - .) / .))))
#cds_basket_data %>% mutate(change = (cds_basket_data$`Level Banco Santander` - lead(cds_basket_data$`Level Banco Santander`)) / lead(cds_basket_data$`Level Banco Santander`))
# cds_basket_data %>%
# mutate(across('Level Credit Suisse'), .funs = (DR = list(~(lead(.) - .) / .)))
pseudo.uniform = function(X){
Fhat <- kcde(X)
predict(Fhat, x=X)
}
num_missing_values <-sum(is.na(cds_basket_data$'Level Credit Suisse'))
# Load cds spreads from Excel sheet
library(readxl) # Excel reader package
library(dplyr) # Dataframe manipulation package
library(zoo) # Dataframe manipulation package
# read in Excel file, tab CDS_spreads_history into R dataframe
cds_basket_data=read_excel('C:/CQF/Project/data/default_basket_data.xlsx',
'CDS_spreads_history',
range = 'E21:N1853')
# show cds dataframe
cds_basket_data
# plot with gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='steelblue', xlab='Time Stamp', ylab='Price')
#interpolate missing values in 'Banco Santander' column
cds_basket_data <- cds_basket_data %>%
mutate(`Level Banco Santander` = na.approx(`Level Banco Santander`))
# plot without gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='chocolate4', xlab='Time Stamp', ylab='Price')
# compute returns
cds_basket_data <-
mutate(cds_basket_data, 'Returns' = funs((~(lead(.) - .) / .)))
# Load cds spreads from Excel sheet
library(readxl) # Excel reader package
library(dplyr) # Dataframe manipulation package
library(zoo) # Dataframe manipulation package
# read in Excel file, tab CDS_spreads_history into R dataframe
cds_basket_data=read_excel('C:/CQF/Project/data/default_basket_data.xlsx',
'CDS_spreads_history',
range = 'E21:N1853')
# show cds dataframe
cds_basket_data
# plot with gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='steelblue', xlab='Time Stamp', ylab='Price')
#interpolate missing values in 'Banco Santander' column
cds_basket_data <- cds_basket_data %>%
mutate(`Level Banco Santander` = na.approx(`Level Banco Santander`))
# plot without gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='chocolate4', xlab='Time Stamp', ylab='Price')
# compute returns
cds_basket_data %>%
mutate(across(c('Level Banco Santander'), 'Returns' = funs((~(lead(.) - .) / .))))
#cds_basket_data %>% mutate(change = (cds_basket_data$`Level Banco Santander` - lead(cds_basket_data$`Level Banco Santander`)) / lead(cds_basket_data$`Level Banco Santander`))
# cds_basket_data %>%
# mutate(across('Level Credit Suisse'), .funs = (DR = list(~(lead(.) - .) / .)))
pseudo.uniform = function(X){
Fhat <- kcde(X)
predict(Fhat, x=X)
}
num_missing_values <-sum(is.na(cds_basket_data$'Level Credit Suisse'))
# Load cds spreads from Excel sheet
library(readxl) # Excel reader package
library(dplyr) # Dataframe manipulation package
library(zoo) # Dataframe manipulation package
# read in Excel file, tab CDS_spreads_history into R dataframe
cds_basket_data=read_excel('C:/CQF/Project/data/default_basket_data.xlsx',
'CDS_spreads_history',
range = 'E21:N1853')
# show cds dataframe
cds_basket_data
# plot with gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='steelblue', xlab='Time Stamp', ylab='Price')
#interpolate missing values in 'Banco Santander' column
cds_basket_data <- cds_basket_data %>%
mutate(`Level Banco Santander` = na.approx(`Level Banco Santander`))
# plot without gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='chocolate4', xlab='Time Stamp', ylab='Price')
# compute returns
cds_basket_data %>%
mutate(across(c('Level Banco Santander'), 'Returns' = funs((~(lead(.) - .) / .))))
#cds_basket_data %>% mutate(change = (cds_basket_data$`Level Banco Santander` - lead(cds_basket_data$`Level Banco Santander`)) / lead(cds_basket_data$`Level Banco Santander`))
# cds_basket_data %>%
# mutate(across('Level Credit Suisse'), .funs = (DR = list(~(lead(.) - .) / .)))
pseudo.uniform = function(X){
Fhat <- kcde(X)
predict(Fhat, x=X)
}
num_missing_values <-sum(is.na(cds_basket_data$'Level Credit Suisse'))
View(cds_basket_data)
View(cds_basket_data)
# Load cds spreads from Excel sheet
library(readxl) # Excel reader package
library(dplyr) # Dataframe manipulation package
library(zoo) # Dataframe manipulation package
# read in Excel file, tab CDS_spreads_history into R dataframe
cds_basket_data=read_excel('C:/CQF/Project/data/default_basket_data.xlsx',
'CDS_spreads_history',
range = 'E21:N1853')
# show cds dataframe
cds_basket_data
# plot with gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='steelblue', xlab='Time Stamp', ylab='Price')
#interpolate missing values in 'Banco Santander' column
cds_basket_data <- cds_basket_data %>%
mutate(`Level Banco Santander` = na.approx(`Level Banco Santander`))
# plot without gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='chocolate4', xlab='Time Stamp', ylab='Price')
# compute returns
cds_basket_data %>%
mutate(across(c('Level Banco Santander'), ~(lead(.) - .) / .))
#cds_basket_data %>% mutate(change = (cds_basket_data$`Level Banco Santander` - lead(cds_basket_data$`Level Banco Santander`)) / lead(cds_basket_data$`Level Banco Santander`))
# cds_basket_data %>%
# mutate(across('Level Credit Suisse'), .funs = (DR = list(~(lead(.) - .) / .)))
pseudo.uniform = function(X){
Fhat <- kcde(X)
predict(Fhat, x=X)
}
num_missing_values <-sum(is.na(cds_basket_data$'Level Credit Suisse'))
View(cds_basket_data)
View(cds_basket_data)
# Load cds spreads from Excel sheet
library(readxl) # Excel reader package
library(dplyr) # Dataframe manipulation package
library(zoo) # Dataframe manipulation package
# read in Excel file, tab CDS_spreads_history into R dataframe
cds_basket_data=read_excel('C:/CQF/Project/data/default_basket_data.xlsx',
'CDS_spreads_history',
range = 'E21:N1853')
# show cds dataframe
cds_basket_data
# plot with gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='steelblue', xlab='Time Stamp', ylab='Price')
#interpolate missing values in 'Banco Santander' column
cds_basket_data <- cds_basket_data %>%
mutate(`Level Banco Santander` = na.approx(`Level Banco Santander`))
# plot without gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='chocolate4', xlab='Time Stamp', ylab='Price')
# compute returns
cds_basket_data %>%
mutate(across(c('Level Banco Santander'), ~(lead(.) - .) / .), .names = "{.col}.fn{.fn}")
#cds_basket_data %>% mutate(change = (cds_basket_data$`Level Banco Santander` - lead(cds_basket_data$`Level Banco Santander`)) / lead(cds_basket_data$`Level Banco Santander`))
# cds_basket_data %>%
# mutate(across('Level Credit Suisse'), .funs = (DR = list(~(lead(.) - .) / .)))
pseudo.uniform = function(X){
Fhat <- kcde(X)
predict(Fhat, x=X)
}
num_missing_values <-sum(is.na(cds_basket_data$'Level Credit Suisse'))
# Load cds spreads from Excel sheet
library(readxl) # Excel reader package
library(dplyr) # Dataframe manipulation package
library(zoo) # Dataframe manipulation package
# read in Excel file, tab CDS_spreads_history into R dataframe
cds_basket_data=read_excel('C:/CQF/Project/data/default_basket_data.xlsx',
'CDS_spreads_history',
range = 'E21:N1853')
# show cds dataframe
cds_basket_data
# plot with gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='steelblue', xlab='Time Stamp', ylab='Price')
#interpolate missing values in 'Banco Santander' column
cds_basket_data <- cds_basket_data %>%
mutate(`Level Banco Santander` = na.approx(`Level Banco Santander`))
# plot without gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='chocolate4', xlab='Time Stamp', ylab='Price')
# compute returns
cds_basket_data %>%
mutate(across(c('Level Banco Santander'), ~(lead(.) - .) / .), .names = "{.col}.fn{.fn}")
#cds_basket_data %>% mutate(change = (cds_basket_data$`Level Banco Santander` - lead(cds_basket_data$`Level Banco Santander`)) / lead(cds_basket_data$`Level Banco Santander`))
# cds_basket_data %>%
# mutate(across('Level Credit Suisse'), .funs = (DR = list(~(lead(.) - .) / .)))
pseudo.uniform = function(X){
Fhat <- kcde(X)
predict(Fhat, x=X)
}
num_missing_values <-sum(is.na(cds_basket_data$'Level Credit Suisse'))
View(cds_basket_data)
View(cds_basket_data)
# Load cds spreads from Excel sheet
library(readxl) # Excel reader package
library(dplyr) # Dataframe manipulation package
library(zoo) # Dataframe manipulation package
# read in Excel file, tab CDS_spreads_history into R dataframe
cds_basket_data=read_excel('C:/CQF/Project/data/default_basket_data.xlsx',
'CDS_spreads_history',
range = 'E21:N1853')
# show cds dataframe
#cds_basket_data
# plot with gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='steelblue', xlab='Time Stamp', ylab='Price')
#interpolate missing values in 'Banco Santander' column
cds_basket_data <- cds_basket_data %>%
mutate(`Level Banco Santander` = na.approx(`Level Banco Santander`))
# plot without gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='chocolate4', xlab='Time Stamp', ylab='Price')
# compute returns
cds_basket_data %>%
mutate(across(c('Level Banco Santander'), ~(lead(.) - .) / .), .names = "{.col}.fn{.fn}")
cds_basket_data
#cds_basket_data %>% mutate(change = (cds_basket_data$`Level Banco Santander` - lead(cds_basket_data$`Level Banco Santander`)) / lead(cds_basket_data$`Level Banco Santander`))
# cds_basket_data %>%
# mutate(across('Level Credit Suisse'), .funs = (DR = list(~(lead(.) - .) / .)))
pseudo.uniform = function(X){
Fhat <- kcde(X)
predict(Fhat, x=X)
}
num_missing_values <-sum(is.na(cds_basket_data$'Level Credit Suisse'))
# Load cds spreads from Excel sheet
library(readxl) # Excel reader package
library(dplyr) # Dataframe manipulation package
library(zoo) # Dataframe manipulation package
# read in Excel file, tab CDS_spreads_history into R dataframe
cds_basket_data=read_excel('C:/CQF/Project/data/default_basket_data.xlsx',
'CDS_spreads_history',
range = 'E21:N1853')
# show cds dataframe
#cds_basket_data
# plot with gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='steelblue', xlab='Time Stamp', ylab='Price')
#interpolate missing values in 'Banco Santander' column
cds_basket_data <- cds_basket_data %>%
mutate(`Level Banco Santander` = na.approx(`Level Banco Santander`))
# plot without gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='chocolate4', xlab='Time Stamp', ylab='Price')
# compute returns
cds_basket_data <- cds_basket_data %>%
mutate(across(c('Level Banco Santander'), ~(lead(.) - .) / .), .names = "{.col}.fn{.fn}")
cds_basket_data
#cds_basket_data %>% mutate(change = (cds_basket_data$`Level Banco Santander` - lead(cds_basket_data$`Level Banco Santander`)) / lead(cds_basket_data$`Level Banco Santander`))
# cds_basket_data %>%
# mutate(across('Level Credit Suisse'), .funs = (DR = list(~(lead(.) - .) / .)))
pseudo.uniform = function(X){
Fhat <- kcde(X)
predict(Fhat, x=X)
}
num_missing_values <-sum(is.na(cds_basket_data$'Level Credit Suisse'))
View(cds_basket_data)
# Load cds spreads from Excel sheet
library(readxl) # Excel reader package
library(dplyr) # Dataframe manipulation package
library(zoo) # Dataframe manipulation package
# read in Excel file, tab CDS_spreads_history into R dataframe
cds_basket_data=read_excel('C:/CQF/Project/data/default_basket_data.xlsx',
'CDS_spreads_history',
range = 'E21:N1853')
# show cds dataframe
#cds_basket_data
# plot with gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='steelblue', xlab='Time Stamp', ylab='Price')
#interpolate missing values in 'Banco Santander' column
cds_basket_data <- cds_basket_data %>%
mutate(`Level Banco Santander` = na.approx(`Level Banco Santander`))
# plot without gaps
plot(cds_basket_data$`Level Banco Santander`, type='o', pch=10, col='chocolate4', xlab='Time Stamp', ylab='Price')
# compute returns
cds_basket_data <- cds_basket_data %>%
mutate(across(starts_with('Level'), ~(lead(.) - .) / .))
cds_basket_data
#cds_basket_data %>% mutate(change = (cds_basket_data$`Level Banco Santander` - lead(cds_basket_data$`Level Banco Santander`)) / lead(cds_basket_data$`Level Banco Santander`))
# cds_basket_data %>%
# mutate(across('Level Credit Suisse'), .funs = (DR = list(~(lead(.) - .) / .)))
pseudo.uniform = function(X){
Fhat <- kcde(X)
predict(Fhat, x=X)
}
num_missing_values <-sum(is.na(cds_basket_data$'Level Credit Suisse'))
View(cds_basket_data)
